# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

import pydantic
import typing_extensions
from ...core.pydantic_utilities import UniversalBaseModel
from ...core.serialization import FieldMetadata
from .observation_level import ObservationLevel


class ObservationV2(UniversalBaseModel):
    """
    An observation from the v2 API with field-group-based selection.
    Core fields are always present. Other fields are included only when their field group is requested.
    """

    id: str = pydantic.Field()
    """
    The unique identifier of the observation
    """

    trace_id: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="traceId")
    ] = pydantic.Field(default=None)
    """
    The trace ID associated with the observation
    """

    start_time: typing_extensions.Annotated[
        dt.datetime, FieldMetadata(alias="startTime")
    ] = pydantic.Field()
    """
    The start time of the observation
    """

    end_time: typing_extensions.Annotated[
        typing.Optional[dt.datetime], FieldMetadata(alias="endTime")
    ] = pydantic.Field(default=None)
    """
    The end time of the observation
    """

    project_id: typing_extensions.Annotated[str, FieldMetadata(alias="projectId")] = (
        pydantic.Field()
    )
    """
    The project ID this observation belongs to
    """

    parent_observation_id: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="parentObservationId")
    ] = pydantic.Field(default=None)
    """
    The parent observation ID
    """

    type: str = pydantic.Field()
    """
    The type of the observation (e.g. GENERATION, SPAN, EVENT)
    """

    name: typing.Optional[str] = pydantic.Field(default=None)
    """
    The name of the observation
    """

    level: typing.Optional[ObservationLevel] = pydantic.Field(default=None)
    """
    The level of the observation
    """

    status_message: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="statusMessage")
    ] = pydantic.Field(default=None)
    """
    The status message of the observation
    """

    version: typing.Optional[str] = pydantic.Field(default=None)
    """
    The version of the observation
    """

    environment: typing.Optional[str] = pydantic.Field(default=None)
    """
    The environment from which this observation originated
    """

    bookmarked: typing.Optional[bool] = pydantic.Field(default=None)
    """
    Whether the observation is bookmarked
    """

    public: typing.Optional[bool] = pydantic.Field(default=None)
    """
    Whether the observation is public
    """

    user_id: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="userId")
    ] = pydantic.Field(default=None)
    """
    The user ID associated with the observation
    """

    session_id: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="sessionId")
    ] = pydantic.Field(default=None)
    """
    The session ID associated with the observation
    """

    completion_start_time: typing_extensions.Annotated[
        typing.Optional[dt.datetime], FieldMetadata(alias="completionStartTime")
    ] = pydantic.Field(default=None)
    """
    The completion start time of the observation
    """

    created_at: typing_extensions.Annotated[
        typing.Optional[dt.datetime], FieldMetadata(alias="createdAt")
    ] = pydantic.Field(default=None)
    """
    The creation timestamp of the observation
    """

    updated_at: typing_extensions.Annotated[
        typing.Optional[dt.datetime], FieldMetadata(alias="updatedAt")
    ] = pydantic.Field(default=None)
    """
    The last update timestamp of the observation
    """

    input: typing.Optional[typing.Any] = pydantic.Field(default=None)
    """
    The input data of the observation
    """

    output: typing.Optional[typing.Any] = pydantic.Field(default=None)
    """
    The output data of the observation
    """

    metadata: typing.Optional[typing.Any] = pydantic.Field(default=None)
    """
    Additional metadata of the observation
    """

    provided_model_name: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="providedModelName")
    ] = pydantic.Field(default=None)
    """
    The model name as provided by the user
    """

    internal_model_id: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="internalModelId")
    ] = pydantic.Field(default=None)
    """
    The internal model ID matched by Langfuse
    """

    model_parameters: typing_extensions.Annotated[
        typing.Optional[typing.Any], FieldMetadata(alias="modelParameters")
    ] = pydantic.Field(default=None)
    """
    The parameters of the model used for the observation
    """

    usage_details: typing_extensions.Annotated[
        typing.Optional[typing.Dict[str, int]], FieldMetadata(alias="usageDetails")
    ] = pydantic.Field(default=None)
    """
    The usage details of the observation. Key is the usage metric name, value is the number of units consumed.
    """

    cost_details: typing_extensions.Annotated[
        typing.Optional[typing.Dict[str, float]], FieldMetadata(alias="costDetails")
    ] = pydantic.Field(default=None)
    """
    The cost details of the observation. Key is the cost metric name, value is the cost in USD.
    """

    total_cost: typing_extensions.Annotated[
        typing.Optional[float], FieldMetadata(alias="totalCost")
    ] = pydantic.Field(default=None)
    """
    The total cost of the observation in USD
    """

    prompt_id: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="promptId")
    ] = pydantic.Field(default=None)
    """
    The prompt ID associated with the observation
    """

    prompt_name: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="promptName")
    ] = pydantic.Field(default=None)
    """
    The prompt name associated with the observation
    """

    prompt_version: typing_extensions.Annotated[
        typing.Optional[int], FieldMetadata(alias="promptVersion")
    ] = pydantic.Field(default=None)
    """
    The prompt version associated with the observation
    """

    latency: typing.Optional[float] = pydantic.Field(default=None)
    """
    The latency in seconds
    """

    time_to_first_token: typing_extensions.Annotated[
        typing.Optional[float], FieldMetadata(alias="timeToFirstToken")
    ] = pydantic.Field(default=None)
    """
    The time to first token in seconds
    """

    model_id: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="modelId")
    ] = pydantic.Field(default=None)
    """
    The matched model ID
    """

    model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(
        extra="allow", frozen=True
    )
